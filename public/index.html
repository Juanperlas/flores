<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Crea tu Flor Amarilla</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/viewer-style.css" />
  </head>
  <body class="editor-page">
    <div class="editor-container">
      <div class="controls-panel">
        <h1 class="controls-title">üåª Crea tu Regalo</h1>
        <p class="controls-subtitle">
          Personaliza los detalles y mira la magia suceder en tiempo real.
        </p>

        <section class="config-section">
          <h2>Apartado de Introducci√≥n</h2>
          <div class="form-group">
            <label for="intro-message-input">Mensaje de Inicio</label>
            <input
              type="text"
              id="intro-message-input"
              value="Feliz 21 de Setiembre Amor"
              data-preview-section="intro"
            />
          </div>
          <div class="form-group">
            <label for="sender-name-input">De</label>
            <input
              type="text"
              id="sender-name-input"
              value="Tu nombre"
              data-preview-section="intro"
            />
          </div>
          <div class="form-group">
            <label for="receiver-name-input">Para</label>
            <input
              type="text"
              id="receiver-name-input"
              value="Nombre de el/ella"
              data-preview-section="intro"
            />
          </div>
          <div class="form-group">
            <label for="secondary-message-input">Mensaje Secundario</label>
            <textarea
              id="secondary-message-input"
              rows="3"
              placeholder="Un peque√±o texto extra..."
              data-preview-section="intro"
            ></textarea>
          </div>
        </section>

        <section class="config-section">
          <h2>Apartado del Cuerpo</h2>
          <div class="form-group">
            <label for="body-title-input">T√≠tulo</label>
            <input
              type="text"
              id="body-title-input"
              value="Espero que te encante"
              data-preview-section="body"
            />
          </div>

          <div class="form-group">
            <label>Elige un Fondo</label>
            <div class="theme-selector" data-preview-section="body">
              <input
                type="radio"
                id="theme1"
                name="theme"
                value="theme-1"
                checked
              />
              <label for="theme1" class="theme-option theme-1-preview"></label>
              <input type="radio" id="theme2" name="theme" value="theme-2" />
              <label for="theme2" class="theme-option theme-2-preview"></label>
              <input type="radio" id="theme3" name="theme" value="theme-3" />
              <label for="theme3" class="theme-option theme-3-preview"></label>
            </div>
          </div>

          <div class="form-group">
            <label>Elige el Elemento Animado</label>
            <div class="element-selector" data-preview-section="body">
              <div class="radio-group">
                <input
                  type="radio"
                  id="el-f-amarilla"
                  name="falling-element"
                  value="assets/flor.gif"
                  checked
                />
                <label for="el-f-amarilla">üåª</label>
              </div>
              <div class="radio-group">
                <input
                  type="radio"
                  id="el-rosa"
                  name="falling-element"
                  value="assets/rosa.gif"
                />
                <label for="el-rosa">üåπ</label>
              </div>
              <div class="radio-group">
                <input
                  type="radio"
                  id="el-estrella"
                  name="falling-element"
                  value="assets/estrella.gif"
                />
                <label for="el-estrella">‚ú®</label>
              </div>
              <div class="radio-group">
                <input
                  type="radio"
                  id="el-corazon"
                  name="falling-element"
                  value="assets/corazon.gif"
                />
                <label for="el-corazon">‚ù§Ô∏è</label>
              </div>
              <div class="radio-group">
                <input
                  type="radio"
                  id="el-otro"
                  name="falling-element"
                  value="custom"
                />
                <label for="el-otro">Otro:</label>
                <input
                  type="text"
                  id="custom-element-input"
                  maxlength="2"
                  placeholder="üòÉ"
                />
              </div>
            </div>
          </div>

          <div class="form-group" data-preview-section="body">
            <label>Fotos (0-5)</label>
            <div id="image-inputs-container"></div>
            <button id="add-image-btn" class="btn">Agregar Foto</button>
          </div>

          <div class="form-group" data-preview-section="body">
            <label for="music-url-input">URL de M√∫sica (YouTube)</label>
            <div class="input-with-button">
              <input
                type="url"
                id="music-url-input"
                value="https://www.youtube.com/watch?v=R82Pk0VQWOQ"
              />
              <button
                id="load-music-btn"
                class="btn icon-btn"
                title="Cargar y reproducir m√∫sica"
              >
                ‚ñ∂Ô∏è
              </button>
            </div>
          </div>

          <div class="form-group" data-preview-section="body">
            <label>Mensajes (M√°ximo 5)</label>
            <div id="messages-inputs-container"></div>
            <button id="add-message-btn" class="btn">Agregar Mensaje</button>
          </div>
        </section>

        <div class="action-buttons-container">
          <button id="preview-btn" class="btn btn-secondary">
            Previsualizar
          </button>
          <button id="acquire-btn" class="btn btn-primary">Adquirir</button>
        </div>
      </div>
      <div class="preview-panel">
        <iframe id="preview-iframe" src="ver.html" frameborder="0"></iframe>
      </div>

      <div id="share-modal" class="modal hidden">
        <div class="share-modal-content">
          <span class="close-button">&times;</span>

          <div id="payment-view">
            <h2>¬°Tu Personalizaci√≥n est√° Lista!</h2>
            <p class="share-instructions">
              Para poder desbloquearla y compartirla, realiza el pago de
              <strong>S/. 3.00 soles</strong> al siguiente n√∫mero Yape/Plin:
            </p>
            <div class="payment-number">123-456-789</div>
            <p class="share-instructions">
              Env√≠a el comprobante de pago al WhatsApp
              <strong>+51 123 456 789</strong>. Una vez verificado, te
              enviaremos tu c√≥digo de compra.
            </p>
            <button id="show-code-input-btn" class="btn btn-primary">
              Ya tengo mi c√≥digo de compra
            </button>
          </div>

          <div id="code-input-view" class="hidden">
            <h2>Verificar C√≥digo de Compra</h2>
            <p class="share-instructions">
              Ingresa el c√≥digo que te enviamos por WhatsApp para generar tu
              enlace √∫nico.
            </p>
            <div class="code-input-group">
              <input
                type="text"
                id="purchase-code-input"
                placeholder="Ej: ABC-123"
              />
              <button id="verify-code-btn" class="btn">Verificar</button>
            </div>
            <p id="code-status-message" class="code-status"></p>
            <button id="back-to-payment-btn" class="btn-secondary">
              Volver a instrucciones
            </button>
          </div>

          <div id="final-link-view" class="hidden">
            <h2>¬°Enlace Generado con √âxito!</h2>
            <p class="share-instructions">
              ¬°Copia el enlace o escanea el QR para compartir tu creaci√≥n!
            </p>
            <input type="text" id="final-url-input" readonly />
            <div id="qr-code-container"></div>
            <p class="share-instructions small-text">
              Nota: Tu enlace estar√° activo permanentemente.
            </p>
          </div>
        </div>
      </div>
    </div>

    <div id="loading-preview-modal" class="loading-overlay hidden">
      <div class="loading-spinner"></div>
      <p>Cargando previsualizaci√≥n...</p>
    </div>

    <script type="module" src="js/firebase-config.js"></script>
    <script type="module" src="js/editor.js"></script>
  </body>
</html>
